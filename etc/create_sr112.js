var mongoose = require('lib/mongoose.js');
var async = require('async');
var Problem = require('models/problem').Problem;

var ids = [];

async.series([
    open,
    dropDatabase,
    requireModels,
    generateIds,
    createProblems,
    createUsers,
    createFields
], function (err) {
    console.log(arguments);
    mongoose.disconnect();
    process.exit(err ? 255 : 0);
});

function open(callback) {
    mongoose.connection.on('open', callback);
}

function dropDatabase(callback) {
    var db = mongoose.connection.db;
    db.dropDatabase(callback);
}

function requireModels(callback) {
    require('models/user');
    require('models/problem');
    require('models/fieldMap');

    async.each(Object.keys(mongoose.models), function (modelName, callback) {
        mongoose.models[modelName].ensureIndexes(callback);
    }, callback);
}

function generateIds(callback) {
    for (var i = 0; i <= 100; i++) {
        ids.push(mongoose.Types.ObjectId(i));
    }
    callback(null);
}

function createProblems(callback) {
    var problems = [
        {
            topic: 'ЗАДАНИЕ № 1',
            question:
                'Сегодня 26 апреля 2014 г.<br>\
                Банда «Бабдитов» не спит. Вернее спит мало, потому что пьет допоздна и работает по ночам.<br>\
                Благодарю их, они хорошо решают проблемы. Есть заказ следующий, и они там постараются нормально. Бабдиты вышли на волю. И сразу в пекло.<br>\
                Ёжик – главный отморозок леса, Анка – стреляет редко, но метко, Мара – в лесу с ней лучше не встречаться. Они готовят бомбу, которая взорвет лес.<br>\
                Работа - эксклюзивная! Следите за ними. Настроение прочувствуйте.<br>\
                Взяли бардоотпускное отделение. Положили где-то за 49 из 51 бойцов… а у них без потерь.<br>\
                Ожидайте встречи с ними.<br>\
                Опасайтесь, ощиплют грамотно. Но их не обойти. Эта зона их.',
            answers: ['колючка'],
            cost: 60,
            hints: [
                { text: 'ул. Лесная, между домами 49 и 51', cost: 25}
             ],
            bonuses: [],
            _id: ids[1]
        },
        {
            topic: 'ЗАДАНИЕ № 2',
            question:
                'Дань времени, бабдиты  на осколках золотоносной империи. Без суждений о морали и вере! Под гнетом новой хищной стратегии - золотой лихорадки,\
                симптом которой – артефакты и деньги.\
                Здесь руки безглазой Фемиды не дотягиваются…Разбитые старые баяны-здания, среди жилых. Их щемят и щемят молодые борзые.\
                Ещё не изданный в мае числа первого, но видимый издали, на ходу щемящий  искрами, лепит инстинкты молочной клыкастой поросли, играет лязгом стали в охрипшем голосе. Меняются лица на морды и рыла, руки - на лапы с когтями, копыта и крылья. И что получишь ты, затеяв спор с зоной? Будь осторожен, сталкер! Держись правее границ угодий.',
            answers: ['валет'],
            cost: 60,
            hints: [
                { text: 'Координаты: 57.766523 40.921294', cost: 25}
            ],
            bonuses: [],
            _id: ids[2]
        },
        {
            topic: 'ЗАДАНИЕ № 3',
            question:
                'Резко, четко, как удары плетки, как остров кидал, больно, как жало, нужно как водка, жирно как сало и так много - что аж плохо стало… Хватит пялиться - ослабится зрение. Надо работать мозгом – упорото, по-моему мнению! Опытный сталкер, герой  - бравый парень. Против тебя неукротимый остров местный, опасный одиночке, ремонтируемый кем-то. И там все делай быстро, четко, чисто. А не то полетят искры. Аккуратно зайди в зону и вскоре, не то 53 бюрера упакоют.  ',
            answers: ['хреннайдешь'],
            cost: 60,
            hints: [
                { text: 'Островского, 53', cost: 25}
            ],
            bonuses: [],
            _id: ids[3]
        },
        {
            topic: 'ЗАДАНИЕ № 4',
            question:
                'Прочесывая зону, мы забрели в бывшую студию звукозаписи. Проклятые карлики и бюреры побывали и здесь. Разломано всё. Стулья, шкафы, аппаратура…хаос!  Бумаг на полу…хоть жопой жуй! Мы нашли чьи-то зарисовочки. Логика в них есть. Писали они годно.<br>\
                Полупустой вагон ж/д когда-то стоял<br>\
                Меня везет ночной экспресс на старый вокзал<br>\
                И пусть меня никто не ждет у дверей<br>\
                Вези меня ночной экспресс к дядьке Яру скорей.<br>\
                Город плывет в море цветных огней<br>\
                Город живет Славой своих людей<br>\
                Старый вокзал стены свои открой<br>\
                Там мы найдем 3 части кода! Хой!<br>\
                Далее текст размыт. Интересно автор сам бывал там? Посетите зону, будьте осторожны… Монстры не дремлют. Попробуйте собрать все 3 части кода. Безопасный радиус поиска 25-30 метров.',
            answers: ['кровосос'],
            cost: 60,
            hints: [
                { text: 'Координаты: 57.755528 40.896354', cost: 25}
            ],
            bonuses: [],
            _id: ids[4]
        },
        {
            topic: 'ЗАДАНИЕ № 5',
            question:
                'Дневник:<br>\
                26.04.2013<br>\
                Упоротые эти жители были. Строили завод. Нашли нефть. Радостно прыгали. Машут и машут руками. Эй-богу, как дети. А в итоге все равно часть забросили. Стоят они такие брошенные за активными. Будьте осторожны… водные аномалии отгорожены остатками сетки и проволоки. Обойдите их. То, что нам нужно находится дальше, почти под прямым от них. Примерно в 200 метрах.',
            answers: ['патолс'],
            cost: 60,
            hints: [
                { text: 'Координаты: 57.742458, 40.878735', cost: 25},
                { text: 'Если вы не нашли все бумажки или не можете решить - Найдите код маркером около двери на 3м этаже (на крыше) здания слева', cost: 15}
            ],
            bonuses: [],
            _id: ids[5]
        },
        {
            topic: 'ЗАДАНИЕ № 6',
            question:
                'Прогулки по Зоне вещь крайне опасная. Есть улицы полные монстров. Есть относительно безопасные. Есть промзоны, укрепленные баррикадами. Пройди по цветной улице, сверни на улицу древнего города, выезжая на нужную улицу, аккуратно проедьте мимо фонтана. Будьте осторожны. Там дикие банды. Не вступайте с ними в диалог. Двигайтесь дальше примерно 100 метров. Поверните направо. Там вы увидите «деревню кровососов». Внимательно обыщите оба дома.  ',
            answers: ['взрывмозга'],
            cost: 60,
            hints: [
                { text: 'пос. фанерник, ул. центральная 2а', cost: 25}
            ],
            bonuses: [],
            _id: ids[6]
        },
        {
            topic: 'ЗАДАНИЕ № 7',
            question:
                '- Братья! Пришло время вечерней молитвы Золотому Монолиту! Подпевайте мне!<br><br>\
                - Пятьдесят семь бойцов Долга<br>\
                Плавали в Волге<br>\
                Пытались найти арт "Аквамарин"<br>\
                <br>\
                На них семь кровососов,<br>\
                Девять мертвых матросов,<br>\
                Водичка стала, словно рубин<br>\
                <br>\
                Эхей, семь кровососов,<br>\
                Девять мертвых матросов<br>\
                Послал наш Монолит-господин!<br>\
                <br>\
                Сорок одного снорка<br>\
                Прижали мы к Жарке,<br>\
                Стейк из них очень нами любим<br>\
                <br>\
                Не надо нам их очей,<br>\
                Надо трёх лишь ступней<br>\
                На алтарь тебе, наш господин!<br>\
                <br>\
                Эхей, девять очей,<br>\
                Да тройку ступней,<br>\
                На алтарь тебе, наш господин!',
            answers: ['егозваливиталик'],
            cost: 60,
            hints: [
                { text: 'координаты: 57.7979 41.0393', cost: 25}
            ],
            bonuses: [
                { text: 'автоматкалашникова', cost: 20 },
            ],
            _id: ids[7]
        },
        {
            topic: 'ЗАДАНИЕ № 8',
            question:
                'Братья, недавно я видел, как Золотой Монолит покарал неверного. Глупец увидел вдали целую россыпь артефактов и от своей алчности совсем потерял нюх, не заметил отсутствия животных - и угодил прямо в лапы к контроллёру. Я знаю, Монолит показал мне это, чтобы я рассказал вам, что бывает с неверными. Контролёр лишь слегка пришиб мозги тому сталкеру и ушёл, оставив его слоняться буквально в нескольких метрах от заветной цели. О, я до сих пор помню его пустые глаза и это бормотание: "разбуди меня, когда кончится сентябрь, разбуди меня, когда кончится сентябрь". Я не был достоин даровать ему покой и ушёл, оставив его одного скитаться меж трёх сосен.',
            answers: ['золотойносок'],
            cost: 60,
            hints: [
                { text: 'недострой на ул Зеленая м/у  д.3 и д.1', cost: 25}
            ],
            bonuses: [],
            _id: ids[8]
        },
        {
            topic: 'ЗАДАНИЕ № 9',
            question:
                'Мой путь пролегал по самым опасным районам зоны. Повсюду меня поджидали аномалии, мутанты, но хуже всего бабдиты! Эти отмороженные сталкеры отбирали у меня все, что было добыто в зоне. Но несколько артефактов удалось припрятать. Когда я двигался к схрону, наткнулся на бабдитов. Долго пришлось путать следы, уходя от них. Весь город исколесил.\
            Заглянул к "Кристине", потом в приемную президента области... Из последних сил бежал, решил укрыться в юношеской библиотеке. Думал отсиделся. Только собрался двинуть к схрону, как нарвался на Йогу. И снова пришлось побегать...\
            Рванул к другу в "Фотон"...достали и там. Думал смогу в 7 бане укрыться. Перехватили у частного дома с тем же номером. Отбился и прыгнул в реку. Переплыл. Укрылся в Дом.ru...\
            Ушел. Получилось. Можно теперь отправляться к схрону.',
            answers: ['светляк'],
            cost: 60,
            hints: [
                { text: 'подсказка: 57.73.33; 40.93.33, сгоревшая газель', cost: 25}
            ],
            bonuses: [],
            _id: ids[9]
        },
        {
            topic: 'ЗАДАНИЕ № 10',
            question:
                'Мы с напарником к этому НИИ давно присматривались, еще с пятого числа июля месяца, это точно. Уж больно место пустынное. Ни зверья в округе, ни мутантов, метров на семьдесят пять в округе, ей-ей. Только кто бы туда ни пошёл, либо перепуганные вусмерть, с глазами как две восьмерки да с катушек съехавшие возвращались, либо вообще их больше не видали. Решили сами потихоньку разведать. Выехали затемно, а как добрались до места, уже светать начало. Оставили машину в распадочке, пошли лесом к опушке. Там остановились, напарник остался внизу, а я полез на дерево с оптикой - оглядеться, что в окрестностях творится. Вижу - корпуса, и не так чтобы совсем уж заброшенные, стёкла целые почти все, во дворах травы немного, не то что в других местах - по пояс... По всему выходило, что живут тут, однако тишина полнейшая и движения никакого, просто ноль живности. Тут вдруг чуть справа ударили очереди - кто-то из автомата бил, раз девять выстрелили. Я оптикой туда. Вижу, на крыше корпуса незнакомый мужик как сорок крыс затравленных мечется и стреляет без разбору во все стороны. В кого - смотрю и понять не могу. И вот тут… началось... Я всё видел как на ладони. Автомат у него из рук сам собой улетел… Будто девяносто девять крыльев у железки выросло!.. Мужик рот раскрыл, видно, заорал чего-то, достал нож и выставил его перед собой. И тут - ёлки-моталки! - гляжу, а перед ним сам собой висит ещё нож! Вот так в воздухе жалом к нему и висит, и не держит его никто. Что дальше было - это не ночью рассказывать... Минут двадцать семь того мужика резали. Понемногу так, суки, мать их за ногу - там порез, тут укол… Бедолага скоро уже весь в крови был... Потом, как он уж в ногах заплетаться стал, его нож тоже выбило; тут мужика как поднимет в воздух, как завернёт несколько раз… Я такого в жизни не видел - натурально, как тряпку вертело… Я моментально мокрый стал… Потом... Нет, всё, не буду... В общем, как я отдышался, ещё минут пять шарил прицелом по окрестностям. Руки дрожали, оптика от пота мокрая стала… Ну хоть бы какая тварь! Пять раз проверял в обычном диапазоне и в инфакрасном - ни-че-го. Как я слез, напарник на меня поглядел, да и спрашивать раздумал. А как вернулись на базу, я неделю до бровей надирался, не просыхал... Потом, как отошёл чуток, порасспрашивал наших - может, кто про такое чего слышал? Только народ на меня посматривать начал косо - часом, не двинулся ли? Вот такие дела…',
            answers: ['джабе'],
            cost: 60,
            hints: [
                { text: 'подсказка: 57.758809, 40.992755', cost: 25}
            ],
            bonuses: [],
            _id: ids[10]
        },
        {
            topic: 'Бабдиты',
            question:
                'Отправляйтесь в хостел "Академия". Бабдиты не пускают к себе без цветов.<br>\
                 Бонус от спонсора: "Позвоните до приезда на локацию с приобретенной симкарты на номер 8 910 958 25 64"',
            answers: ['маслина'],
            cost: 60,
            hints: [],
            bonuses: [
                { text: 'излучение', cost: 20},
                { text: 'катастрофа', cost: 20},
                { text: 'соска', cost: 20},
                { text: 'баблоотпчелятины', cost: 20}
            ],
            _id: ids[11]
        },
        {
            topic: 'Вольные',
            question:
                'Отправляйтесь к Вольникам (57.771354 41.042314). Они не пустят Вас к себе без аптечки.',
            answers: ['сидорович'],
            cost: 60,
            hints: [],
            bonuses: [
                { text: 'двустволка', cost: 20},
                { text: 'сумасшествие', cost: 20},
                { text: 'полушарие', cost: 20},
                { text: 'беспроцентный', cost: 20},
                { text: 'поиск', cost: 20},
                { text: 'ночнаязвезда', cost: 20},
                { text: 'мастерзведзы', cost: 10},
                { text: 'бородабаян', cost: 20},
                { text: 'винторез', cost: 30},
                { text: 'св98', cost: 20},
                { text: 'мазила', cost: 10}
            ],
            _id: ids[12]
        },
        {
            topic: 'Монолит',
            question:
                'Отправляйтесь к бойцам Монолита (57.78800 41.017439). Они не пустят Вас без командного клича',
            answers: ['страус'],
            cost: 60,
            hints: [],
            bonuses: [
                { text: 'живность', cost: 20},
                { text: 'кококовсмятку', cost: 20},
                { text: 'голодныйкореец', cost: 20}
            ],
            _id: ids[13]
        },
        {
            topic: 'Долг и Свобода',
            question:
                'Отправляйтесь к Свободе (57.719495 40.890221) и Долгу (57.720612 40.889974)<br>\
                Свободовцы не пустят без обнимашек',
            answers: ['вечнаявойна'],
            cost: 60,
            hints: [],
            bonuses: [
                { text: 'вштанах', cost: 20},
                { text: 'неосилишь', cost: 20},
                { text: 'досвидания', cost: 20},
                
                { text: 'сушеныйгеракл', cost: 20},
                { text: 'тупойсапер', cost: 20},
                { text: 'ищитедалее', cost: 20},
                { text: 'пердимоноколь', cost: 20},
                { text: 'слепойкурей', cost: 20}
            ],
            _id: ids[14]
        },
        {
            topic: 'История',
            question:
                'Забираемся, значит, в тот ангар. Вокруг пылища, паутины - вообще под крышу; детекторы полную чушь порют: мол, не то что никого вокруг, а и нас в природе нету. Пошли позиции по периметру занимать: Санёк впереди, мы прикрываем... И тут - БЗДЫНЬ! Балки здоровенные такие железные, ржавые под потолком, так одна срывается - и вниз! Как Санёк увернулся, сам не знает, а эта хрень воткнулась прямо в точности, где он стоял. Ну он, как упал и откатился, не встал на ноги вообще, а так лёжа да-вай шмалять! Остальные тоже напугались, идиоты, и себе пошли садить в белый свет. Тут Санёк начал орать что-то про тварь в углу. Я смотрю - никакой твари не вижу... В общем, поехали, не операция, а конкретный такой бардак... бордельеро... Пошли мы по этим развалинам ходить; ходили минут пять - осторожненько так, чтоб под балками этими больше не очутиться. И бред, ну бред полный: то одному, то другому чего-то привидится, они давай очередями в полрожка полосовать по пустому месту. А двоим вообще не повезло: один шёл по ровному полу, и вдруг в яму упал, второго сорвавшейся дверью поперёк спины перетянуло. Ну, тут мы вообще завелись - ясно ж ведь, что тварь какая-то развлекается! Врубили пси-защиту, во все углы по газовой гранате - ну и ждём, кто появится, а пальцы на спуске. Ждём-ждём... А тварь, как потом оказалось, летучая была, что ли... Пока мы внизу всем скопом дурака валяли, она себе тихонько сидела под потолком и веселилась, сука... Дошло только до нас поздно, да и то случайно почти. Гадина эта расшатала ещё пару балок - полкрыши и навернулось, прямо на нас и навернулось, четверых ребят в лепёшку на месте... Вот тут мы её и достали! Как Санёк услышал шебуршание наверху, так на автомате и дал очередь - полезнейший, блин, рефлекс! Ну тут и визгу! Мы тоже, ясно, подскочили, дали из всех стволов... Тварь сыпанула сверху с такими воплями, что прям уши закладывало. Ну, тут уж мы душу отвели: кто прикладом бил, кто просто ногами прохаживался, Санёк, так тот нож достал, чтоб ей побольнее потроха вывалить... Командир, понятно, всех с трудом, но пооттаскивал, а то бы вообще падлу эту ложками с пола соскребать пришлось...<br>\
                хорошаяистория или автопереход?',
            answers: ['хорошаяистория'],
            cost: 15,
            hints: [],
            bonuses: [],
            _id: ids[15]
        },
        {
            topic: 'Задание 11',
            question:
                'А слышали о Проводнике? Самый первый из сталкеров. Первый в Зону ходить начал, и до сих пор живой. Говорят, проведёт в любую точку. Другое дело, что найти его проблематично - афиш с адресом не расклеивает... Да и провести тоже далеко не каждого соглашается. Баблосов вроде бы берёт немало, но если нашёл его и договорился, будь уверен - он тебя железно доставит куда надо. Вот с кем бы перетереть. Уж он-то, наверное, видал, что там за радаром...<br>\
                Кто доставит меня куда угодно? Или автопереход?',
            answers: ['проводник'],
            cost: 15,
            hints: [],
            bonuses: [],
            _id: ids[16]
        },
        {
            topic: 'Задание 12',
            question:
                'Братья, Монолит призвал меня ночью. Я говорил с ним. Он был прекрасен в своём величии. Я едва не ослеп, но его свет наполнил меня великой силой! Я знаю, я чувствую, что его сила пребывает со всеми нами! Он сказал мне, что победить зло способна лишь твёрдая вера. Он сказал, что его сила наполнит только верных. Ещё он открыл мне, что наша победа уже близка!<br>\
                воимямонолита! нет автопереходам!',
            answers: ['воимямонолита'],
            cost: 15,
            hints: [],
            bonuses: [],
            _id: ids[17]
        },
        {
            topic: 'Задание 13',
            question:
                'Так вот чего я сказать-то хотел. Когда «долгИ» того иллюза брали, я ж рядом был! Да я случайно вообще в тех краях оказался! У моей тачки, у «Нивы»-то у моей, правое переднее полетело: болты на кочке срезало. И по запчастям полный ноль. Поматерился я как следует, а потом дай, думаю, на завод схожу, подберу нужные. Ну там километр идти было, туда-сюда - на полчаса делов! Да и бывал я там раньше… Тут вдруг вижу - «долгИ»! Да не просто патруль, а штук полста! Ну, думаю, блин-компот!.. Как стоял, так в кусты и завалился. «Если заметили и прочёсывать начнут, - думаю, - тут мне и трындец». Залёг, короче, в ямке, и стараюсь не дышать. А тут стрельба! Чтоб такими очередями шмаляли, я только раз в жизни слышал… когда Первую базу брали - старики, помните? В общем, лежу, слушаю в оба уха… Оно себе бахает, а потом ещё и как грохнет!.. Через минут пять затихает и ко мне вроде никто не идёт. Ну, я наглости набрался, привстал чутка и в бинокль смотрю. А эти быстренько вытягиваются из цеха… помятые такие, жмуриков своих за собой кучу тащат и иллюза на брезенте… ошмётки уже одни от иллюза остались… Утянулись в лощинку. Потом слышу - движки заревели, и звук ушёл. Я ещё подождал - вроде никого. Я внутрь. Ну ясно, что после «Долга» хрен чего найдёшь! Но интересно ж! Эт-то, я вам скажу, было что-то! Стены они почти насквозь подырявили. Балки поперёк пола валяются, кусок крыши обвалился. Гильз по колено - натуральное стрельбище. Кровища, ошмётки какие-то... Полезного, правда, ничего не нашёл - так, два рожка полных, да автомат валялся, балкой придавленный, не вытащить… Про болты я, ясное дело, и думать забыл… Вернулся к тачке, подумал пять минут, снял по болту с остальных колёс… ну и доехал потихоньку… А выйди я туда раньше на полчасика… Мда…<br>\
                зонунадоуничтожить или сваливать автопереходом отсюда!',
            answers: ['зонунадоуничтожить'],
            cost: 15,
            hints: [],
            bonuses: [],
            _id: ids[18]
        },
        {
            topic : 'Глобальный бонус',
            question : 'Оценка за костюмы + количество артефактов',
            answers : ['42'],
            cost: 0,
            hints: [
                { text: 'п10', cost: 10},
                { text: 'п20', cost: 20},
                { text: 'п30', cost: 30},
                { text: 'п40', cost: 40},
                { text: 'п50', cost: 50}
            ],
            bonuses: [
                { text: 'б10', cost: 10},
                { text: 'б20', cost: 20},
                { text: 'б30', cost: 30},
                { text: 'б40', cost: 40},
                { text: 'б50', cost: 50},
                { text: 'б60', cost: 60},
                { text: 'б70', cost: 70},
                { text: 'б80', cost: 80},
                { text: 'б90', cost: 90},
                { text: 'б100', cost: 100},
                { text: 'б110', cost: 110}
            ],
            _id: Problem.getGlobalObjectId()
        }
    ];

     async.each(problems, function (problemData, callback) {
        var problem = new mongoose.models.Problem(problemData);
        problem.save(callback);
    }, callback);
}

function createUsers(callback) {
    //example of user: {username: 'admin', password: '123123123', admin: true}

    var users = [
        {username: 'adminb', password: 'finalfantasy13',admin: true},
        {username: 'admins', password: 'finalfantasy13', admin:true},
        {username: 'admind', password: 'finalfantasy13',admin: true},
        {username: 'adminm', password: 'finalfantasy13', admin:true},
        {username: 'adminv', password: 'finalfantasy13',admin: true},
        {username: 'alpaltus', password: 'gic5b4'},
        {username: 'orgi', password: 'g029p9'},
        {username: 'hrundeli', password: 'znq3ek'},
        {username: 'heras2', password: 'x8jhkk'},
        {username: 'partizan', password: 'y680it'},
        {username: 'madfox', password: 'b6c1z2'},
        {username: 'mishadomosed', password: 'w6qjc9'},
        {username: 'banda', password: 'i1ayrq'},
        {username: 'vsehorowo', password: 'tmwc0k'},
        {username: 'highvoltage', password: 'fl9rde'},
        {username: 'beebee', password: 'mbk55f'},
        {username: 'bios', password: 'vr6576'},
        {username: 'hlopkopyt', password: '2u7dzy'},
        {username: 'bobudei', password: 'ft4mrm'},
        {username: 'butylka', password: 'd2y1pd'},
        {username: 'mustang', password: 'j1dxv5'},
        {username: 'anchous', password: '48zsks'},
        {username: 'romawki', password: 'fwmz6j'},
        {username: 'joseph', password: 'r0jxj0'},
        {username: 'vugluskr', password: 'dptsn9'},
        {username: 'rezerv1', password: '7nxw61'},
        {username: 'rezerv2', password: 'bj0gim'},
        {username: 'rezerv3', password: 'y35hvv'}
    ];

    async.each(users, function (userData, callback) {
        var user = new mongoose.models.User(userData);
        user.problemHistory.push({problemId: Problem.getGlobalObjectId(),solved:true});
        user.save(callback);
    }, callback);
}

function createFields(callback) {
    //example of fieldmap: {X:1, Y:1, BS:false, ProblemId: ids[1]}

    var fields = [
        {X: 8, Y: 1},{X: 9, Y: 1, ProblemId: ids[3]},{X: 10, Y: 1},{X: 11, Y: 1},{X: 12, Y: 1},{X: 13, Y: 1},{X: 14, Y: 1},
        {X: 1, Y: 2},{X: 2, Y: 2},{X: 3, Y: 2},{X: 4, Y: 2},{X: 5, Y: 2},{X: 6, Y: 2},{X: 7, Y: 2},{X: 10, Y: 2},{X: 11, Y: 2},{X: 12, Y: 2},{X: 13, Y: 2},{X: 14, Y: 2},{X: 15, Y: 2},{X: 16, Y: 2},{X: 17, Y: 2},{X: 18, Y: 2},
        {X: 1, Y: 3},{X: 2, Y: 3},{X: 3, Y: 3, ProblemId : ids[4]},{X: 4, Y: 3},{X: 5, Y: 3},{X: 6, Y: 3},{X: 7, Y: 3},{X: 8, Y: 3},{X: 10, Y: 3},{X: 11, Y: 3},{X: 12, Y: 3},{X: 13, Y: 3},{X: 14, Y: 3, ProblemId: ids[2]},{X: 15, Y: 3},{X: 16, Y: 3},{X: 17, Y: 3},{X: 18, Y: 3},{X: 19, Y: 3, ProblemId: ids[6]},
        {X: 1, Y: 4},{X: 2, Y: 4},{X: 3, Y: 4},{X: 4, Y: 4},{X: 5, Y: 4},{X: 6, Y: 4},{X: 7, Y: 4},{X: 8, Y: 4},{X: 10, Y: 4},{X: 11, Y: 4},{X: 12, Y: 4},{X: 13, Y: 4},{X: 14, Y: 4},{X: 15, Y: 4},{X: 16, Y: 4},{X: 17, Y: 4},{X: 18, Y: 4},{X: 19, Y: 4},{X: 20, Y: 4},
        {X: 1, Y: 5},{X: 2, Y: 5},{X: 3, Y: 5},{X: 4, Y: 5},{X: 5, Y: 5},{X: 6, Y: 5},{X: 7, Y: 5},{X: 8, Y: 5, ProblemId: ids[5]},{X: 10, Y: 5, BS: true, ProblemId: ids[11]},{X: 11, Y: 5},{X: 12, Y: 5},{X: 13, Y: 5},{X: 14, Y: 5},{X: 15, Y: 5},{X: 16, Y: 5},{X: 17, Y: 5},{X: 18, Y: 5},{X: 19, Y: 5},{X: 20, Y: 5},
        {X: 1, Y: 6},{X: 2, Y: 6},{X: 3, Y: 6},{X: 4, Y: 6},{X: 5, Y: 6},{X: 6, Y: 6},{X: 7, Y: 6},{X: 8, Y: 6},{X: 10, Y: 6},{X: 11, Y: 6},{X: 12, Y: 6},{X: 13, Y: 6},{X: 14, Y: 6},{X: 15, Y: 6},{X: 16, Y: 6},{X: 17, Y: 6},{X: 18, Y: 6},{X: 19, Y: 6},{X: 20, Y: 6},
        {X: 2, Y: 7, BS: true, ProblemId: ids[14]},{X: 3, Y: 7},{X: 4, Y: 7},{X: 5, Y: 7},{X: 6, Y: 7},{X: 7, Y: 7},{X: 8, Y: 7, ProblemId: ids[15]},{X: 9, Y: 7},{X: 10, Y: 7},{X: 11, Y: 7},{X: 12, Y: 7},{X: 13, Y: 7},{X: 14, Y: 7, ProblemId: ids[8]},{X: 15, Y: 7},{X: 16, Y: 7},{X: 17, Y: 7},{X: 18, Y: 7, ProblemId: ids[17]},{X: 19, Y: 7, BS: true, ProblemId: ids[13]},{X: 20, Y: 7},
        {X: 2, Y: 8, ProblemId: ids[18]},{X: 3, Y: 8},{X: 4, Y: 8},{X: 5, Y: 8, ProblemId: ids[9]},{X: 6, Y: 8},{X: 7, Y: 8},{X: 8, Y: 8},{X: 10, Y: 8},{X: 11, Y: 8},{X: 12, Y: 8},{X: 13, Y: 8},{X: 14, Y: 8},{X: 15, Y: 8},{X: 16, Y: 8},{X: 17, Y: 8},{X: 18, Y: 8},{X: 19, Y: 8},{X: 20, Y: 8},
        {X: 10, Y: 9},{X: 11, Y: 9, ProblemId: ids[1]},{X: 12, Y: 9},{X: 13, Y: 9},{X: 14, Y: 9},{X: 15, Y: 9},{X: 16, Y: 9},{X: 17, Y: 9},{X: 18, Y: 9},{X: 19, Y: 9},{X: 20, Y: 9, ProblemId: ids[7]},
        {X: 9, Y: 10},{X: 10, Y: 10},{X: 11, Y: 10},{X: 12, Y: 10},{X: 13, Y: 10},{X: 14, Y: 10, ProblemId: ids[10]},{X: 15, Y: 10},{X: 16, Y: 10},{X: 17, Y: 10},{X: 18, Y: 10},{X: 19, Y: 10},{X: 20, Y: 10},
        {X: 9, Y: 11},{X: 10, Y: 11},{X: 11, Y: 11},{X: 12, Y: 11},{X: 13, Y: 11},{X: 14, Y: 11},{X: 15, Y: 11},{X: 16, Y: 11},{X: 17, Y: 11, ProblemId: ids[16]},{X: 18, Y: 11, BS: true, ProblemId: ids[12]},{X: 19, Y: 11},{X: 20, Y: 11},
        {X: 8, Y: 12},{X: 9, Y: 12},{X: 10, Y: 12},{X: 11, Y: 12},{X: 12, Y: 12},{X: 13, Y: 12},{X: 14, Y: 12},{X: 15, Y: 12},{X: 16, Y: 12},{X: 17, Y: 12},{X: 18, Y: 12}
    ];


    async.each(fields, function (fieldData, callback) {
        if(!fieldData.ProblemId){
            fieldData.ProblemId = Problem.getGlobalObjectId();
        }
        var field = new mongoose.models.FieldMap(fieldData);
        field.save(callback);
    }, callback);
}
